@using ApiAiWeatherDemo.Models
@model WeatherQuestionModel

@{
    ViewBag.Title = "Index";
}

<h2>API AI</h2>

<p>Hi this endpoint is using the <a href="http://www.api.ai">API AI</a> service</p>
@Html.Label("Ask a question like 'What is the weather in Edinburgh?'");
@using (Html.BeginForm("Post", "apiai", FormMethod.Post))
{
    @Html.LabelFor(m => m.Question)
    @Html.TextBoxFor(m => m.Question)
}
<div class="row">
    @if(Model.ApiAIResponse != null)
    {
        <div class="col-md-4">
            <div>API AI Response</div>
            <div>
                @Html.Label("ID: ")
                @Model.ApiAIResponse.Id
            </div>
            <div>
                @Html.Label("Timestamp: ")
                @Model.ApiAIResponse.Timestamp
            </div>
            <div>
                @Html.Label("Confidence score: ")
                @Model.ApiAIResponse.Result.Score
            </div>
            <div>
                @Html.Label("Confidence score: ")
                @Model.ApiAIResponse.Result.Score
            </div>
            <div>
                @Html.Label("Parameters: ")
                @Model.ApiAIResponse.Result.Parameters.GeoCity
            </div>
            <div>
                @Html.Label("Intent name: ")
                @Model.ApiAIResponse.Result.Metadata.IntentName
            </div>
            <div>
                @Html.Label("Intent ID: ")
                @Model.ApiAIResponse.Result.Metadata.IntentId
            </div>
            <div>
                @Html.Label("Resolved Query: ")
                @Model.ApiAIResponse.Result.ResolvedQuery
            </div>
            <div>
                @Html.Label("Source: ")
                @Model.ApiAIResponse.Result.Source
            </div>
            <div>
                @Html.Label("HTTP Status: ")
                @Model.ApiAIResponse.Status.Code
            </div>
        </div>
    }

    @if (@Model.ForecastResult != null)
    {
        <div class="col-md-4">
            <div>Forecast in @Model.City</div>
            <div>
                @Html.Label("Current temperature: ")
                @Model.ForecastResult.current.temp_c
            </div>
            <div>
                @Html.Label("Feels like temperature: ")
                @Model.ForecastResult.current.feelslike_c
            </div>
            <div>
                @Html.Label("Humidity: ")
                @Model.ForecastResult.current.humidity
            </div>
            <div>
                @Html.Label("Pressure: ")
                @Model.ForecastResult.current.pressure_in
            </div>
        </div>
    }
</div>


