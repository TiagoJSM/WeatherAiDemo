{"version":3,"sources":["../app.js","../components/apiAi/apiAiController.js"],"names":["app","angular","module","config","$stateProvider","$urlRouterProvider","state","url","templateUrl","controller","otherwise","run","$rootScope","$state","$on","evt","to","params","redirectTo","preventDefault","go","apiAiController","$scope","$http","comment","chat","sendText","push","self","msgs","post","question","success","response","forecast","ForecastResult","current","temperature","temp_c","realFeeling","feelslike_c","humidity","pressure","pressure_in","error","err","status"],"mappings":"CAAC,WACG,GAAIA,KAAMC,QAAQC,OAAO,iBAAkB,UAAW,aAEtDF,KAAIG,QAAQ,iBAAkB,qBAAsB,SAAUC,eAAgBC,oBAC1ED,eACKE,MAAM,SACHC,IAAK,SACLC,YAAa,2CAEhBF,MAAM,SACHC,IAAK,SACLC,YAAa,yCACbC,WAAY,oBAEfH,MAAM,QACHC,IAAK,QACLC,YAAa,yCAGhBF,MAAM,UACHC,IAAK,UACLC,YAAa,6CAGrBH,mBACKK,UAAU,aAGnBV,IAAIW,KAAK,aAAc,SAAU,SAAUC,WAAYC,QAEnDD,WAAWE,IAAI,oBAAqB,SAAUC,IAAKC,GAAIC,QAC/CD,GAAGE,aACHH,IAAII,iBACJN,OAAOO,GAAGJ,GAAGE,WAAYD,gBCjCzC,IAAII,kBAAmB,SAAU,QAAS,SAAUC,OAAQC,OACxDD,OAAOE,QAAU,GACjBF,OAAOG,QAEPH,OAAOI,SAAW,WACdJ,OAAOG,KAAKE,MACRC,MAAM,EACNC,MAAOP,OAAOE,WAGlBD,MAAMO,KAAK,kBAAoBC,SAAUT,OAAOE,UAC3CQ,QAAQ,SAAyBC,UAC9B,GAAIC,UAAWD,SAASE,eAAeC,QACnCC,YAAcH,SAASI,OACvBC,YAAcL,SAASM,YACvBC,SAAWP,SAASO,SACpBC,SAAWR,SAASS,WACxBrB,QAAOG,KAAKE,MACRC,MAAM,EACNC,MACI,sBAAwBQ,YAAc,IACtC,kBAAoBE,YAAc,IAClC,eAAiBE,SAAW,oBAAsBC,cAG3DE,MAAM,SAAuBX,UACzBA,UACCX,OAAOG,KAAKE,MACRC,MAAM,EACNC,MAAO,8FAnBvBN,SAuBW,SAAUsB,KACM,MAAfA,IAAIC,OACJxB,OAAOG,KAAKE,MACRC,MAAM,EACNC,MAAO,yEAGQ,MAAfgB,IAAIC,QACRxB,OAAOG,KAAKE,MACRC,MAAM,EACNC,MAAO,gGAIvBP,OAAOE,QAAU,KAIzBvB,SAAQC,OAAO,iBAAiBO,WAAW,kBAAmBY","file":"app.js","sourcesContent":["(function () {\r\n    var app = angular.module(\"weatherAiDemo\", [\"ngRoute\", \"ui.router\"]);\r\n\r\n    app.config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state(\"index\", {\r\n                url: \"/index\",\r\n                templateUrl: \"Client/components/index/indexView.html\"\r\n            })\r\n            .state(\"apiAi\", {\r\n                url: \"/apiai\",\r\n                templateUrl: \"Client/components/apiAi/apiAiView.html\",\r\n                controller: \"ApiAiController\"\r\n            })\r\n            .state(\"luis\", {\r\n                url: \"/luis\",\r\n                templateUrl: \"Client/components/luis/luisView.html\",\r\n                //controller: \"EnterpriseSalesController\"\r\n            })\r\n            .state(\"watson\", {\r\n                url: \"/watson\",\r\n                templateUrl: \"Client/components/watson/watsonView.html\",\r\n                //controller: \"EnterpriseSalesController\"\r\n            });\r\n        $urlRouterProvider\r\n            .otherwise(\"/index\");\r\n    }]);\r\n\r\n    app.run(['$rootScope', '$state', function ($rootScope, $state) {\r\n\r\n        $rootScope.$on('$stateChangeStart', function (evt, to, params) {\r\n            if (to.redirectTo) {\r\n                evt.preventDefault();\r\n                $state.go(to.redirectTo, params)\r\n            }\r\n        });\r\n    }]);\r\n}());","var apiAiController = [\"$scope\", \"$http\", function ($scope, $http) {\r\n    $scope.comment = \"\";\r\n    $scope.chat = [];\r\n\r\n    $scope.sendText = function () {\r\n        $scope.chat.push({\r\n            self: true,\r\n            msgs: [$scope.comment]\r\n        });\r\n        \r\n        $http.post(\"/api/apiai/ask\", { question: $scope.comment })\r\n            .success(function successCallback(response) {\r\n                var forecast = response.ForecastResult.current;\r\n                var temperature = forecast.temp_c;\r\n                var realFeeling = forecast.feelslike_c;\r\n                var humidity = forecast.humidity;\r\n                var pressure = forecast.pressure_in;\r\n                $scope.chat.push({\r\n                    self: false,\r\n                    msgs: [\r\n                        \"The temperature is \" + temperature + \"℃\",\r\n                        \"But feels like \" + realFeeling + \"℃\",\r\n                        \"Humidity is \" + humidity + \" and pressure is \" + pressure,\r\n                    ]\r\n                });\r\n            }).error(function errorCallback(response) {\r\n                if(response){\r\n                    $scope.chat.push({\r\n                        self: false,\r\n                        msgs: [\"There was an error, I asssure you we have the best code monkeys working to sort it out\"]\r\n                    });\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                if (err.status === 400) {\r\n                    $scope.chat.push({\r\n                        self: false,\r\n                        msgs: [\"I'm sorry, I didn't get that, can you ask in some other way, please\"]\r\n                    });\r\n                }\r\n                else if(err.status === 404) {\r\n                    $scope.chat.push({\r\n                        self: false,\r\n                        msgs: [\"I'm sorry, I don't know that place, can you be more specific or ask about somewhere else\"]\r\n                    });\r\n                }\r\n            }); \r\n        $scope.comment = \"\";\r\n    }\r\n}];\r\n\r\nangular.module(\"weatherAiDemo\").controller('ApiAiController', apiAiController);"]}